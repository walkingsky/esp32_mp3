#ifndef __MENU_H__
#define __MENU_H__
#include <Ticker.h>
#include "main.h"
#include "oled/oled.h"
#include <TimeLib.h>
#ifdef _COMPONENT_WM8978_AUDIO
#include "audio/wm8978card.h"
#endif

#define MENU_LEVEL_MAIN 0
#define MENU_LEVEL_MAIN_SUB_CNT 4
#define MENU_LEVEL_SBU 1
#define MENU_L0_TIME 0
#define MENU_L0_CDCARD 1
#define MENU_L0_RECORD 2
#define MENU_L0_LONGREC 3

struct MenuTree
{
    uint8_t menu_No;
    struct MenuTree *parent;
    struct MenuTree *current_child;
    struct MenuTree *left;
    struct MenuTree *right;
    void (*menu_op)(uint8_t key);
    void (*menu_disp)(void);
};

const unsigned char img_sdcard[] U8X8_PROGMEM = {
    0xC0, 0xFF, 0xFF, 0x07, 0x00, 0xE0, 0xFF, 0xFF, 0x0F, 0x00, 0x60, 0x00, 0x00, 0x18, 0x00, 0x20,
    0x22, 0x22, 0x32, 0x00, 0x20, 0x66, 0x22, 0x62, 0x00, 0x20, 0x66, 0x22, 0xC2, 0x00, 0x20, 0x66,
    0x22, 0x82, 0x01, 0x20, 0x22, 0x22, 0x02, 0x03, 0x20, 0x00, 0x00, 0x20, 0x06, 0x20, 0x00, 0x00,
    0x20, 0x04, 0x20, 0x00, 0x00, 0x20, 0x04, 0x20, 0x00, 0x00, 0x20, 0x04, 0x20, 0x00, 0x00, 0x00,
    0x04, 0x20, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, 0x00, 0x00, 0x04,
    0x20, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, 0x00, 0x00, 0x04, 0x20, 0xFC, 0xFF, 0x3D, 0x04, 0x20,
    0x06, 0x00, 0x60, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02,
    0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00,
    0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40,
    0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04, 0x20, 0x02, 0x00, 0x40, 0x04,
    0x20, 0x06, 0x00, 0x60, 0x04, 0x20, 0xFE, 0xFF, 0x7F, 0x04, 0x20, 0x00, 0x00, 0x00, 0x04, 0x20,
    0x00, 0x00, 0x00, 0x04, 0x60, 0x00, 0x00, 0x00, 0x06, 0xE0, 0xFF, 0xFF, 0xFF, 0x07, 0xC0, 0xFF,
    0xFF, 0xFF, 0x03}; // sd 卡icon 图标

const unsigned char img_record[] U8X8_PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00,
    0x80, 0x81, 0x01, 0x00, 0x00, 0x40, 0x00, 0x06, 0x00, 0x00, 0x20, 0x00, 0x04, 0x00, 0x00, 0x10,
    0x00, 0x08, 0x00, 0x00, 0x10, 0x00, 0x18, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x00, 0x08, 0x00,
    0x10, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x00, 0x08, 0x00, 0x10,
    0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00,
    0x00, 0x00, 0x00, 0x10, 0x01, 0x00, 0x00, 0x00, 0x10, 0x01, 0x80, 0x00, 0x00, 0x10, 0x01, 0x80,
    0xF8, 0xFF, 0xFF, 0x01, 0x80, 0x08, 0x00, 0x10, 0x01, 0x80, 0x08, 0x00, 0x10, 0x01, 0x00, 0x19,
    0x00, 0x88, 0x00, 0x00, 0x11, 0x00, 0x88, 0x00, 0x00, 0x23, 0x00, 0x84, 0x00, 0x00, 0x42, 0x00,
    0x42, 0x00, 0x00, 0x84, 0x81, 0x21, 0x00, 0x00, 0x0C, 0x7E, 0x30, 0x00, 0x00, 0x18, 0x00, 0x18,
    0x00, 0x00, 0x60, 0x00, 0x04, 0x00, 0x00, 0xC0, 0x83, 0x03, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00,
    0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00,
    0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00};

const unsigned char img_longrec[] U8X8_PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00,
    0xFF, 0x00, 0x00, 0x00, 0x81, 0x83, 0x81, 0x00, 0x00, 0xC3, 0x81, 0xC3, 0x01, 0x00, 0xC7, 0x0F,
    0xE3, 0x00, 0x00, 0xC6, 0x0F, 0x63, 0x00, 0x60, 0xCC, 0x00, 0x33, 0x06, 0xE0, 0xCC, 0x00, 0x33,
    0x07, 0xC0, 0xCC, 0x00, 0x33, 0x03, 0xC0, 0xCC, 0x0F, 0x33, 0x03, 0xC0, 0xCC, 0x0F, 0x33, 0x03,
    0xC0, 0xCC, 0x00, 0x33, 0x03, 0xC0, 0xCC, 0x00, 0x33, 0x07, 0x60, 0xCC, 0x00, 0x33, 0x06, 0x00,
    0xC6, 0x0F, 0x63, 0x00, 0x00, 0xC7, 0x00, 0xE3, 0x00, 0x00, 0xC3, 0x81, 0xC3, 0x01, 0x00, 0x81,
    0x81, 0x81, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x18,
    0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00,
    0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00,
    0x00, 0xC0, 0xFF, 0x03, 0x00, 0x00, 0xC0, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00};

void menuInit();
void doMenu(uint8_t key); // 操作菜单
void displayMenu();       // 显示菜单
#ifdef _COMPONENT_SDCARD
void file_menu_display(struct dirList *p);
#endif
void main_time_display();    // 主菜单（时间）
void main_sdcard_display();  // cd card file list
void main_record_display();  // 录音子菜单
void main_longrec_display(); // 监听录音菜单
void m_sdcard_display();     // sd卡文件列表内容显示
void m_record_display();     // 录音操作界面初始页面
void m_longrecord_display(); // 监听录音操作界面初始页面

void m_sdcard_content(uint8_t key);     // sd 目录列表操作页面
void m_record_content(uint8_t key);     // 录音操作页面
void m_longrecord_content(uint8_t key); // 监听录音操作页面

void main_time_display_clock(); // 主时间页面的时钟和温湿度数据定时更新
void record_count_timer();

#endif